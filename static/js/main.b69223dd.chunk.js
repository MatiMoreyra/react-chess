(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{26:function(e,t,n){e.exports=n(35)},31:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(13),o=n.n(a);n(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,u,s=n(1),l=n(2),h=n(7),d=n(5),p=n(6),v=n(19);!function(e){e[e.Black=0]="Black",e[e.White=1]="White"}(c||(c={})),function(e){e.King="King",e.Queen="Queen",e.Rook="Rook",e.Bishop="Bishop",e.Knight="Knight",e.Pawn="Pawn"}(u||(u={}));var f={height:"80%",width:"80%",border:"none"};function b(e){if(null===e)return"";var t="";return t=e.color===c.Black?"black":"white","pieces/"+e.type.toLowerCase()+"-"+t+".png"}var y=function(e){return null==e.piece?i.a.createElement("div",null):i.a.createElement("img",{src:b(e.piece),alt:"",style:f})};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g,O={height:"12.5%",width:"12.5%",float:"left",border:"none",padding:"0"},m=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},O,{background:e.background});return i.a.createElement("button",{style:t,onClick:e.onClick},i.a.createElement(y,{piece:e.piece}))},x={height:"80vmin",width:"80vmin",border:"none",borderRadius:"5px",overflow:"hidden",boxShadow:"5px 5px 5px rgba(0, 0, 0, 0.5)"},j=function(e){for(var t=new Array,n=function(n){for(var r=function(r){var a=(r+n)%2===0?"#ffddba":"#ab5e3a";void 0!==e.highlightedSquares&&(a=void 0===e.highlightedSquares.find((function(e){return e.row===n&&e.column===r}))?a:"#fff763");t.push(i.a.createElement(m,{piece:e.board.pieces[n][r],background:a,onClick:function(){e.onSquareClick(n,r)},key:n.toString()+r.toString()}))},a=0;a<8;a++)r(a)},r=0;r<8;r++)n(r);return i.a.createElement("div",{style:x},t)};!function(e){e.CheckMate="Checkmate",e.Draw="Draw",e.Open="Open"}(g||(g={}));var k=function e(){Object(s.a)(this,e),this.onGameEnded=void 0},P={margin:"auto",position:"relative",top:"50%",left:"50%",msTransform:"translate(-50%, -50%)",transform:"translate(-50%, -50%)"},E=function(e){return i.a.createElement("div",{style:P},e.children)},S=n(37),R=n(39),_=n(38),C=n(41),B={width:"100%",display:"flex",justifyContent:"space-around",padding:"10px"},W={width:"40%",boxShadow:"1px 1px 1px rgba(0, 0, 0, 0.5)"},q=function(e){return i.a.createElement("div",{style:B},i.a.createElement(C.a,{style:W,onClick:e.onUndo},"Undo"),i.a.createElement(C.a,{style:W,onClick:e.onRestart},"Restart"))},H={width:"100%",borderColor:"#b5b5b5",borderRadius:"0px",borderBottomStyle:"solid",borderTopStyle:"solid",borderWidth:"1px",padding:"5px",overflow:"hidden",background:"#f8f8f8",fontWeight:"bold",color:"#626161"},A=function(e){return i.a.createElement("div",{style:H},e.text)};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M={width:"100%",borderColor:"#b5b5b5",borderRadius:"0px",borderWidth:"1px",padding:"5px",overflow:"hidden",background:"Black",fontWeight:"bold",color:"#626161",textAlign:"center"},D=function(e){var t,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},M);return e.color===c.White?(t="White",n.background="white",n.color="#626161"):(t="Black",n.background="black",n.color="white"),i.a.createElement("div",{style:n},t+" plays")},T={height:"30px",width:"30px",marginRight:"-20px"},K=function(e){for(var t=new Array,n=0;n<e.count;n++)t.push(i.a.createElement("div",{style:T},i.a.createElement(y,{piece:e.piece})));return i.a.createElement(S.a,null,t)},G={width:"100%",display:"flex",maxHeight:"100%",justifyContent:"space-around",padding:"5px",overflowY:"scroll",overflowX:"hidden"};var Q=function(e){var t=function(e){var t=new Array;return e.forEach((function(e){var n=t.find((function(t){return t.piece.color===e.color&&t.piece.type===e.type}));n||(n={piece:e,count:0},t.push(n)),n.count++})),t}(e.pieces),n=new Array,r=new Array;return t.forEach((function(e){e.piece.color===c.White?n.push(i.a.createElement(K,{piece:e.piece,count:e.count})):r.push(i.a.createElement(K,{piece:e.piece,count:e.count}))})),i.a.createElement("div",{style:G},i.a.createElement(_.a,{xs:6},n),i.a.createElement(_.a,{xs:6},r))},U={width:"100%",maxHeight:"100%",padding:"5px",paddingLeft:"10px",overflowY:"scroll",overflowX:"hidden"};function F(e){return String.fromCharCode("a".charCodeAt(0)+e.column)+String.fromCharCode("8".charCodeAt(0)-e.row)}function V(e){return F(e.source)+" "+F(e.destination)}var z=function(e){for(var t=new Array,n=0;n<e.history.length;n+=2)t.push(i.a.createElement(S.a,null,i.a.createElement(_.a,{xs:2},n/2+1),i.a.createElement(_.a,null,V(e.history[n])),i.a.createElement(_.a,null,n+1===e.history.length?i.a.createElement("div",null,"..."):V(e.history[n+1]))));return i.a.createElement("div",{style:U},t)},N={minWidth:"15vw",height:"100%",maxHeight:"100%",width:"100%",border:"none",borderRadius:"5px",overflow:"hidden",boxShadow:"5px 5px 5px rgba(0, 0, 0, 0.5)",background:"white",display:"flex",flexDirection:"column",justifyContent:"space-between"},J=function(e){return i.a.createElement("div",{style:N},i.a.createElement("div",null,i.a.createElement(D,{color:e.currentTurn})," ",i.a.createElement(A,{text:"Captured Pieces"})),i.a.createElement(Q,{pieces:e.capturedPieces}),i.a.createElement("div",null,i.a.createElement(A,{text:"History"})),i.a.createElement("div",{style:{display:"flex",marginBottom:"auto",overflow:"auto",flexShrink:2}},i.a.createElement(z,{history:e.history})),i.a.createElement("div",null,i.a.createElement(A,{text:"Controls"}),i.a.createElement(q,{onUndo:e.onUndo,onRestart:e.onRestart})))},L=n(40),X=function(e){var t;return t=e.result===g.Draw?"Game ended by draw.":e.currentTurn===c.White?"Black won by checkmate.":"White won by checkmate.",i.a.createElement(L.a,{show:e.result!==g.Open,onHide:e.onHide},i.a.createElement(L.a.Header,{closeButton:!0},i.a.createElement(L.a.Title,null,"Game ended!")),i.a.createElement(L.a.Body,null,t),i.a.createElement(L.a.Footer,null,i.a.createElement(C.a,{variant:"primary",onClick:e.onHide},"Close")))},Y={backgroundImage:"linear-gradient(-90deg, #643722, #bf9c77, #643722)",width:"100vw",height:"100vh",overflow:"hidden"},$=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleUndo=function(){n.props.engine.undoMove(),n.setState({sourceSquare:null})},n.handleRestart=function(){n.props.engine.restart(),n.setState({sourceSquare:null})},n.handleSquareClick=function(e,t){if(console.log(e+","+t+" clicked"),null==n.state.sourceSquare)null!=n.props.engine.getChessBoard().pieces[e][t]&&n.setState({sourceSquare:{row:e,column:t}});else{var r={source:n.state.sourceSquare,destination:{row:e,column:t}};n.props.engine.isValidMove(r)&&n.props.engine.move(r),n.setState({sourceSquare:null})}},n.handleGameEnded=function(e){n.setState({gameResult:e})},n.highlightedSquares=function(){var e=new Array;return null!=n.state.sourceSquare&&e.push(n.state.sourceSquare),e},e.engine.onGameEnded=n.handleGameEnded,n.state={sourceSquare:null,gameResult:g.Open},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.engine.getChessBoard();return i.a.createElement("div",{style:Y},i.a.createElement(E,null,i.a.createElement(S.a,{style:{margin:"10px",height:"80%",maxHeight:"80vh"},bsPrefix:"d-flex justify-content-center"},i.a.createElement(R.a,{bsPrefix:"d-flex justify-content-center"},i.a.createElement(_.a,null,i.a.createElement(j,{board:t,onSquareClick:this.handleSquareClick,highlightedSquares:this.highlightedSquares()})),i.a.createElement(_.a,null,i.a.createElement(J,{history:this.props.engine.getHistory(),currentTurn:this.props.engine.whoPlays(),capturedPieces:this.props.engine.getCapturedPieces(),onUndo:this.handleUndo,onRestart:this.handleRestart}))))),i.a.createElement(X,{result:this.state.gameResult,currentTurn:this.props.engine.whoPlays(),onHide:function(){e.setState({gameResult:g.Open})}}))}}]),t}(i.a.Component);function Z(e){switch(e){case"k":return{type:u.King,color:c.Black};case"q":return{type:u.Queen,color:c.Black};case"r":return{type:u.Rook,color:c.Black};case"b":return{type:u.Bishop,color:c.Black};case"n":return{type:u.Knight,color:c.Black};case"p":return{type:u.Pawn,color:c.Black};case"K":return{type:u.King,color:c.White};case"Q":return{type:u.Queen,color:c.White};case"R":return{type:u.Rook,color:c.White};case"B":return{type:u.Bishop,color:c.White};case"N":return{type:u.Knight,color:c.White};case"P":return{type:u.Pawn,color:c.White};default:return null}}var ee=function(){function e(){Object(s.a)(this,e),this._firstRule=void 0}return Object(l.a)(e,[{key:"push",value:function(e){if(void 0===this._firstRule)this._firstRule=e;else{for(var t=this._firstRule;void 0!==t.next;)t=t.next;t.next=e}}},{key:"evaluate",value:function(e,t){return void 0!==this._firstRule?this._firstRule.evaluate(e,t):{valid:!1}}}]),e}(),te=function(){function e(t,n,r,i,a,o){Object(s.a)(this,e),this.board=void 0,this.currentTurn=void 0,this.history=void 0,this.capturedPieces=void 0,this.onCheck=void 0,this.result=void 0,this.board=t,this.currentTurn=n,this.history=r,this.capturedPieces=i,this.onCheck=a,this.result=o}return Object(l.a)(e,[{key:"clone",value:function(){var t=this.board.clone(),n=new Array;this.history.forEach((function(e){n.push(e)}));var r=new Array;return this.capturedPieces.forEach((function(e){r.push(e.clone())})),new e(t,this.currentTurn,n,r,this.onCheck,this.result)}}]),e}(),ne=function(){function e(t){Object(s.a)(this,e),this.pieces=void 0,this.pieces=t.pieces}return Object(l.a)(e,[{key:"clone",value:function(){for(var t=new Array(8),n=0;n<8;n++){t[n]=new Array(8);for(var r=0;r<8;r++)t[n][r]=this.pieces[n][r]}return new e({pieces:t})}},{key:"getPiece",value:function(e){return this.pieces[e.row][e.column]}},{key:"setPiece",value:function(e,t){this.pieces[e.row][e.column]=t}},{key:"move",value:function(e){this.getPiece(e.source)&&(this.setPiece(e.destination,this.getPiece(e.source)),this.setPiece(e.source,null))}},{key:"isPathFree",value:function(e){if(!e.isDiagonal()&&!e.isVertical()&&!e.isHorizontal())return!1;for(var t=1;t<Math.abs(e.dx)||t<Math.abs(e.dy);){var n=e.source.column+t*Math.sign(e.dx),r=e.source.row+t*Math.sign(e.dy);if(null!==this.getPiece({row:r,column:n}))return!1;t++}return!0}}]),e}(),re=function(){function e(){Object(s.a)(this,e),this.next=void 0}return Object(l.a)(e,[{key:"nextOrInvalidResult",value:function(e,t){return this.next?this.next.evaluate(e,t):{valid:!1}}}]),e}(),ie=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(n&&n.color!==t.currentTurn)return{valid:!1};var r=this.nextOrInvalidResult(e,t);return r.valid&&r.nextState&&(r.nextState.currentTurn=r.nextState.currentTurn===c.White?c.Black:c.White),r}}]),t}(re),ae=function(){function e(t){Object(s.a)(this,e),this.color=void 0,this.type=void 0,this.color=t.color,this.type=t.type}return Object(l.a)(e,[{key:"clone",value:function(){return new e({color:this.color,type:this.type})}}]),e}(),oe=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.King)return this.nextOrInvalidResult(e,t);var r=t.board.getPiece(e.destination);if(r&&r.color===n.color)return{valid:!1};if(Math.abs(e.dx)<=1&&Math.abs(e.dy)<=1){var i=t.clone();return i.board.move(e),i.history.push(e),r&&i.capturedPieces.push(new ae(r)),{valid:!0,nextState:i}}return this.nextOrInvalidResult(e,t)}}]),t}(re),ce=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Pawn)return this.next?this.next.evaluate(e,t):{valid:!1};var r=0;switch(n.color){case c.White:r=-1;break;case c.Black:r=1}if(e.dy===r&&0===Math.abs(e.dx)&&null===t.board.getPiece(e.destination)){var i=t.clone();return i.board.move(e),i.history.push(e),{valid:!0,nextState:i}}return this.nextOrInvalidResult(e,t)}}]),t}(re),ue=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Pawn)return this.next?this.next.evaluate(e,t):{valid:!1};var r=0,i=0;switch(n.color){case c.White:r=6,i=4;break;case c.Black:r=1,i=3}if(e.source.row===r&&e.destination.row===i&&0===Math.abs(e.dx)&&t.board.isPathFree(e)&&!t.board.getPiece(e.destination)){var a=t.clone();return a.board.move(e),a.history.push(e),{valid:!0,nextState:a}}return this.nextOrInvalidResult(e,t)}}]),t}(re),se=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Pawn)return this.next?this.next.evaluate(e,t):{valid:!1};var r=0;switch(n.color){case c.White:r=-1;break;case c.Black:r=1}if(e.dy===r&&1===Math.abs(e.dx)){var i=t.board.getPiece(e.destination);if(i&&i.color!==n.color){var a=t.clone();return a.board.move(e),a.history.push(e),a.capturedPieces.push(new ae(i)),{valid:!0,nextState:a}}}return this.nextOrInvalidResult(e,t)}}]),t}(re),le=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Knight)return this.nextOrInvalidResult(e,t);var r=t.board.getPiece(e.destination);if(r&&r.color===n.color)return{valid:!1};if(2===Math.abs(e.dx*e.dy)){var i=t.clone();return i.board.move(e),i.history.push(e),r&&i.capturedPieces.push(new ae(r)),{valid:!0,nextState:i}}return{valid:!1}}}]),t}(re),he=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Bishop)return this.nextOrInvalidResult(e,t);if(!e.isDiagonal())return{valid:!1};if(!t.board.isPathFree(e))return{valid:!1};var r=t.board.getPiece(e.destination);if(r&&r.color===n.color)return{valid:!1};var i=t.clone();return i.board.move(e),i.history.push(e),r&&i.capturedPieces.push(new ae(r)),{valid:!0,nextState:i}}}]),t}(re),de=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Rook)return this.nextOrInvalidResult(e,t);var r=t.board.getPiece(e.destination);if(r&&r.color===n.color)return{valid:!1};if(!e.isVertical()&&!e.isHorizontal())return{valid:!1};if(!t.board.isPathFree(e))return{valid:!1};var i=t.clone();return i.board.move(e),i.history.push(e),r&&i.capturedPieces.push(new ae(r)),{valid:!0,nextState:i}}}]),t}(re),pe=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Queen)return this.nextOrInvalidResult(e,t);var r=t.board.getPiece(e.destination);if(r&&r.color===n.color)return{valid:!1};if(!e.isDiagonal()&&!e.isVertical()&&!e.isHorizontal())return{valid:!1};if(!t.board.isPathFree(e))return{valid:!1};var i=t.clone();return i.board.move(e),i.history.push(e),r&&i.capturedPieces.push(new ae(r)),{valid:!0,nextState:i}}}]),t}(re),ve=function(){function e(t){Object(s.a)(this,e),this.row=void 0,this.column=void 0,this.row=t.row,this.column=t.column}return Object(l.a)(e,[{key:"equals",value:function(e){return this.row===e.row&&this.column===e.column}}]),e}(),fe=function(){function e(t){Object(s.a)(this,e),this.source=void 0,this.destination=void 0,this.source=new ve(t.source),this.destination=new ve(t.destination)}return Object(l.a)(e,[{key:"isVertical",value:function(){return 0===this.dx&&0!==this.dy}},{key:"isHorizontal",value:function(){return 0===this.dy&&0!==this.dx}},{key:"isDiagonal",value:function(){return Math.abs(this.dx)===Math.abs(this.dy)&&0!==this.dx}},{key:"equals",value:function(e){return this.source.equals(e.source)&&this.destination.equals(e.destination)}},{key:"dx",get:function(){return this.destination.column-this.source.column}},{key:"dy",get:function(){return this.destination.row-this.source.row}}]),e}(),be=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=t.board.getPiece(e.source);if(!n||n.type!==u.Pawn)return this.nextOrInvalidResult(e,t);var r=0;switch(n.color){case c.White:r=-1;break;case c.Black:r=1}if(e.dy===r&&1===Math.abs(e.dx)){var i=new ve({column:e.destination.column,row:e.destination.row+r}),a=new ve({column:e.destination.column,row:e.destination.row-r}),o=t.board.getPiece(a),s=t.history[t.history.length-1];if(o&&o.type===u.Pawn&&o.color!==n.color&&s.equals(new fe({source:i,destination:a}))){var l=t.clone();return l.board.move(e),l.history.push(e),l.board.setPiece(a,null),{valid:!0,nextState:l}}}return this.nextOrInvalidResult(e,t)}}]),t}(re),ye=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=this.nextOrInvalidResult(e,t);if(n.valid&&n.nextState){if(this.isChecked(n.nextState,n.nextState.currentTurn))return{valid:!1};var r=t.currentTurn===c.White?c.Black:c.White;n.nextState.onCheck=this.isChecked(n.nextState,r)}return n}},{key:"isChecked",value:function(e,t){for(var n,r=0;r<8;r++)for(var i=0;i<8;i++){var a={row:r,column:i},o=e.board.getPiece({row:r,column:i});if(o&&o.type===u.King&&o.color===t){n=new ve(a);break}}if(void 0===n)return!1;for(var c=0;c<8;c++)for(var s=0;s<8;s++){var l={row:c,column:s},h=e.board.getPiece(l);if(h&&h.color!==t){var d=new fe({source:l,destination:n});if(this.nextOrInvalidResult(d,e).valid)return!0}}return!1}}]),t}(re),we=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"evaluate",value:function(e,t){var n=this.nextOrInvalidResult(e,t);if(!n.nextState)return n;if(!n.valid)return n;for(var r=0;r<8;r++)for(var i=0;i<8;i++){var a={row:r,column:i},o=t.board.getPiece({row:r,column:i});if(o&&o.color===n.nextState.currentTurn)for(var c=0;c<8;c++)for(var u=0;u<8;u++){var s=new fe({source:a,destination:{row:c,column:u}});if(this.nextOrInvalidResult(s,n.nextState).valid)return n}}return n.nextState.result=n.nextState.onCheck?g.CheckMate:g.Draw,n}}]),t}(re),ge=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this)))._state=void 0,e._pipeline=void 0,e._stateHisory=void 0;var n=function(e){for(var t=new Array(8),n=0;n<8;n++)t[n]=new Array(8).fill(null);var r=e.split("/");if(8!==r.length)return null;for(var i=0;i<8;i++)for(var a=0,o=0;o<r[i].length;o++){var c=r[i].charAt(o);if(c>="0"&&c<="8"){if((a+=parseInt(c,10))>8)return null}else{var u=Z(c);if(null==u)return null;t[i][a]=u,a++}}return t}("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR");if(null==n)throw new Error("Invalid fen");return e._state=new te(new ne({pieces:n}),c.White,new Array,new Array,!1,g.Open),e._pipeline=new ee,e.setupRulesPipeline(),e._stateHisory=new Array,e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getChessBoard",value:function(){return this._state.board}},{key:"getHistory",value:function(){return this._state.history}},{key:"move",value:function(e){var t=this._pipeline.evaluate(new fe(e),this._state);return!(!t.valid||void 0===t.nextState)&&(this._stateHisory.push(this._state),this._state=t.nextState,this._state.result!==g.Open&&void 0!==this.onGameEnded&&this.onGameEnded(this._state.result),!0)}},{key:"isValidMove",value:function(e){return this._pipeline.evaluate(new fe(e),this._state).valid}},{key:"whoPlays",value:function(){return this._state.currentTurn}},{key:"getCapturedPieces",value:function(){return this._state.capturedPieces}},{key:"undoMove",value:function(){var e=this._stateHisory.pop();e&&(this._state=e)}},{key:"restart",value:function(){0!==this._stateHisory.length&&(this._state=this._stateHisory[0],this._stateHisory=new Array)}},{key:"setupRulesPipeline",value:function(){this._pipeline.push(new we),this._pipeline.push(new ie),this._pipeline.push(new ye),this._pipeline.push(new oe),this._pipeline.push(new ce),this._pipeline.push(new ue),this._pipeline.push(new se),this._pipeline.push(new le),this._pipeline.push(new he),this._pipeline.push(new de),this._pipeline.push(new pe),this._pipeline.push(new be)}}]),t}(k),Oe=(n(34),new ge);o.a.render(i.a.createElement($,{engine:Oe}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.b69223dd.chunk.js.map